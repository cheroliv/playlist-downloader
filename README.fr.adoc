
= YouTube Playlist Manager CLI
:toc:
:icons: font
:source-highlighter: highlight.js

link:README.en.adoc[English Version]

Un outil en ligne de commande pour gérer, synchroniser et télécharger vos playlists YouTube, conçu pour la robustesse, la testabilité et la simplicité d’utilisation.

== Fonctionnalités

* Création de playlists YouTube (`creer`)
* Téléchargement de playlists au format MP3 (`telecharger`)
* Synchronisation locale/distante (`mettre-a-jour`)
* Suppression de playlists (`detruire`)
* Récupération de l’URL de partage (`partager`)

== Stack Technique

* Python 3
* Typer (CLI)
* yt-dlp (téléchargement)
* API YouTube Data v3 (gestion des playlists)
* google-api-python-client, google-auth-oauthlib (authentification OAuth 2.0)

== Installation

. Clonez le dépôt :
+
[source,bash]
----
git clone https://github.com/cheroliv/playlist-downloader.git
cd playlist-downloader
----

. Créez et activez un environnement virtuel :
+
[source,bash]
----
python3 -m venv venv
source venv/bin/activate
----

. Installez les dépendances :
+
[source,bash]
----
pip install -r requirements.txt
----

== Configuration OAuth 2.0

. Créez un projet Google Cloud et activez l’API YouTube Data v3.
. Configurez l’écran de consentement OAuth et créez des identifiants OAuth 2.0 pour une application de bureau.
. Téléchargez le fichier `client_secret.json` et placez-le à la racine du projet.
. Ajoutez `client_secret.json` à `.gitignore` pour éviter toute fuite de secrets.

== Commandes Disponibles

Les commandes suivantes sont disponibles via le CLI.

=== `creer`

Crée une nouvelle playlist YouTube.

*Usage* :
[source,bash]
----
playlist-downloader creer --titre "Ma Super Playlist" --description "Les meilleurs sons de 2025." --public
----

=== `telecharger`

Télécharge tous les morceaux d'une playlist au format MP3.

*Usage* :
[source,bash]
----
playlist-downloader telecharger "URL_DE_LA_PLAYLIST" -o "mon_dossier" -q "best"
----

=== `detruire`

Supprime une playlist YouTube.

*Usage* :
[source,bash]
----
playlist-downloader detruire "ID_DE_LA_PLAYLIST"
----

=== `partager`

Récupère l'URL de partage d'une playlist.

*Usage* :
[source,bash]
----
playlist-downloader partager "ID_DE_LA_PLAYLIST"
----

=== `importer`

Importe une liste de morceaux depuis un fichier YAML et les télécharge.

*Usage* :
[source,bash]
----
playlist-downloader importer [OPTIONS] CHEMIN_VERS_LE_FICHIER_YAML
----

*Arguments* :
* `CHEMIN_VERS_LE_FICHIER_YAML`: (Requis) Le chemin vers le fichier YAML contenant les artistes et les morceaux.

*Options* :
* `--output-dir, -o`: Le dossier de destination pour les téléchargements. Par défaut: `downloads`.
* `--audio-quality, -q`: La qualité audio (0 pour la meilleure, 9 pour la moins bonne). Par défaut: `0`.
* `--flat, -f`: Télécharger tous les morceaux dans le dossier de sortie sans créer de sous-dossiers par artiste.

*Exemple complet* :
[source,bash]
----
playlist-downloader importer musics.yml --output-dir "downloads/usb_stick" --audio-quality 0 --flat
----


== Principes de Développement

* Programmation fonctionnelle (fonctions pures, immuabilité)
* Gestion d’erreurs explicite et centralisée
* Développement piloté par les tests (TDD) et validation des logs (LDD)
* Architecture hexagonale (domain, ports, adapters)

== Structure du projet

[source]
----
playlist_downloader/
  cli.py
  auth.py
  youtube_api.py
  logger_config.py
  adapters/
    ytdlp_adapter.py
  domain/
    models.py
    ports.py
    errors.py
  services/
tests/
  test_auth.py
  test_youtube_api.py
  test_ytdlp_adapter.py
----

== Tests

Lancez la suite de tests avec :

[source,bash]
----
pytest
----

== Contribution

* Respectez le TDD/LDD et la gestion d’erreurs centralisée.
* Toute nouvelle fonctionnalité doit être couverte par des tests unitaires et d’intégration.
* Documentez toute décision architecturale majeure dans le projet.

== Licence

Ce projet est open source sous licence MIT.

== Auteurs

Voir les contributeurs sur https://github.com/cheroliv/playlist-downloader

// cli python typer yt-dlp youtube-data-api oauth2 open-source tdd architecture-hexagonale gestion-erreurs automation